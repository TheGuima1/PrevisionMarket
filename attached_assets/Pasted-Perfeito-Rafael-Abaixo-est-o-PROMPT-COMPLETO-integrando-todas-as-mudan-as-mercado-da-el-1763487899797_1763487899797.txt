Perfeito, Rafael.
Abaixo est√° **o PROMPT COMPLETO**, integrando **todas as mudan√ßas** (mercado da elei√ß√£o ‚Üí gr√°fico ‚Üí copy CNPJ ‚Üí conex√£o Web3 + mint/burn autom√°tico ‚Üí integra√ß√£o com MetaMask ‚Üí fluxo do admin).

Esse prompt est√° no **formato perfeito para colar no Replit AI Agent** e ele executar as mudan√ßas no seu c√≥digo **sem precisar interpretar nada**.

---

# ‚úÖ **PROMPT COMPLETO PARA O REPLIT (FINAL)**

*(copie e cole exatamente como est√° abaixo no Replit)*

---

# ‚öôÔ∏è **PROMPT PARA IMPLEMENTAR AS MUDAN√áAS NA PALPITES.AI E X-CHANGE**

A seguir est√£o instru√ß√µes detalhadas e obrigat√≥rias.
Siga **EXATAMENTE** como escrito, sem interpretar ou modificar a l√≥gica.

---

# =========================================================

# üîß **1. CORRIGIR A P√ÅGINA DO MERCADO ‚ÄúELEI√á√ÉO BRASIL 2026‚Äù**

# =========================================================

1. Corrigir o bug onde a p√°gina aparece **vazia**.

   * O backend j√° envia os dados da API Polymarket ‚Üí garantir que o frontend est√° lendo o JSON correto (marketId / slug).
   * Verifique se o componente **MarketDetails.jsx** est√° recebendo os props `marketData`, `historyData`, `candidatesData`.
   * Garantir que os states n√£o est√£o como `undefined` na primeira renderiza√ß√£o.
   * Adicionar loading state.

---

# ===========================================

# üìà **2. MELHORAR O GR√ÅFICO (PARECIDO COM POLYMARKET)**

# ===========================================

### REMOVER os intervalos atuais e deixar **somente**:

* **1W**
* **1M**
* **ALL**

### A√á√ïES OBRIGAT√ìRIAS:

1. Substituir o gr√°fico atual por **Recharts LineChart** OU **Chart.js line** com:

   * linhas suaves (`tension: 0.4`)
   * espessura maior
   * marca√ß√µes limpas
   * grid leve
   * eixos vis√≠veis como Polymarket

2. O gr√°fico deve mostrar **linha √∫nica por candidato** (igual Polymarket).

3. Criar **linha de diferen√ßa** (delta de varia√ß√£o):

   * `diff = currentProbability - probability(7 days ago)`
   * mostrar isso como tooltip adicional.

4. Usar cores baseadas no Polymarket:

   * Lula ‚Üí `#FF6F61`
   * Tarc√≠sio ‚Üí `#4C9AFF`
   * Renan ‚Üí `#5AC18E`
   * Haddad ‚Üí `#E8C547`

5. For√ßar qualidade alta:

   * antialiasing
   * retina scaling
   * anima√ß√£o de load suave

---

# ======================================================

# üü™ 3. FUN√á√ÉO DE COPIAR CNPJ (COPY-TO-CLIPBOARD)

# ======================================================

Criar componente **CopyCNPJBox.jsx** contendo:

```
const cnpj = "60.028.471/0001-30";

navigator.clipboard.writeText(cnpj)
```

Design obrigat√≥rio:

* uma box retangular com fundo roxo escuro (#1A1A2E)
* bordas arredondadas
* texto branco
* √≠cone de copiar √† direita
* ‚ÄúCNPJ da empresa (clique para copiar)‚Äù
* ao clicar ‚Üí tooltip ‚ÄúCopiado!‚Äù

Inserir esse componente em **/deposito-pix** na tela de gerar QR.

---

# ================================================================

# üîó 4. CONEX√ÉO COM METAMASK (WALLET CONNECT) ‚Äì PALPITES.AI

# ================================================================

Implementar conex√£o com MetaMask no frontend:

1. Criar hook `useWallet.js`:

   * conectar MetaMask
   * obter address do usu√°rio
   * exibir "wallet connected: 0x..."

2. Na p√°gina Perfil do Usu√°rio ‚Üí mostrar:

   * wallet address
   * saldo BRL3 on-chain (via contract)

3. Garantir compatibilidade com Polygon Mainnet:

```
chainId: "0x89"
```

---

# ================================================================

# üü¶ 5. FUN√á√ÉO DE MINT E BURN AUTOM√ÅTICO VIA M√âTODOS DO ADMIN

# ================================================================

O admin √© o **√∫nico** que interage com a blockchain.

**Carteira do ADMIN:**
`0xcd83c3f36396bcb3569240a3cb34f037ba310926`

---

# üîπ **5A. FLUXO DE MINT (DEP√ìSITO VIA PIX)**

1. Usu√°rio envia PIX ‚Üí envia comprovante ‚Üí admin aprova.
2. Quando admin aprovar, executar automaticamente:

### Backend (palpites.ai) chama:

```
POST https://x-change-palpites-ai.replit.app/mint
{
  "amount": <valor_em_BRL3>,
  "userWallet": "<wallet do usu√°rio>",
  "api_key": "<chave>"
}
```

3. O X-CHANGE deve executar:

```
contract.mint(userWallet, amount, { from: adminWallet })
```

4. **O ADMIN paga os gas fees.**

5. Ap√≥s mint:

   * registrar transa√ß√£o no banco do palpites.ai:
     tabela `onchain_operations`
     campos:

     ```
     id
     user_id
     type ("mint")
     amount
     tx_hash
     timestamp
     ```

---

# üîπ **5B. FLUXO DE BURN (SAQUE PIX)**

1. Usu√°rio solicita saque ‚Üí admin aprova.
2. Backend executa:

```
POST https://x-change-palpites-ai.replit.app/burn
{
  "amount": <valor>,
  "userWallet": "<wallet do usu√°rio>",
  "api_key": "<chave>"
}
```

3. O X-CHANGE faz:

```
contract.transferFrom(userWallet, adminWallet, amount)
contract.burn(adminWallet, amount)
```

‚ö† **IMPORTANTE:**
O usu√°rio **N√ÉO paga gas fee**.
A transa√ß√£o √© iniciada pela carteira do admin, usando `transferFrom`.

Isso exige:

* `approve(adminWallet, amount)` autom√°tico no smart contract OU
* criar fun√ß√£o ‚ÄúadminPullTokens(user, amount)‚Äù no contrato.

---

# ==============================================================

# üß± 6. SMART CONTRACT BRL3 USADO NO FLUXO

# ==============================================================

Usar exatamente este:

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "@openzeppelin/contracts/token/ERC20/ERC20.sol";
import "@openzeppelin/contracts/access/AccessControl.sol";

contract BRL3Token is ERC20, AccessControl {
    bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");
    bytes32 public constant BURNER_ROLE = keccak256("BURNER_ROLE");

    constructor() ERC20("BRL3 Token", "BRL3") {
        _grantRole(DEFAULT_ADMIN_ROLE, msg.sender);
        _grantRole(MINTER_ROLE, msg.sender);
        _grantRole(BURNER_ROLE, msg.sender);
    }

    function mint(address to, uint256 amount) external onlyRole(MINTER_ROLE) {
        _mint(to, amount);
    }

    function burn(address from, uint256 amount) external onlyRole(BURNER_ROLE) {
        _burn(from, amount);
    }

    function adminPull(address user, uint256 amount) external onlyRole(BURNER_ROLE) {
        _spendAllowance(user, msg.sender, amount);
        _transfer(user, msg.sender, amount);
        _burn(msg.sender, amount);
    }
}
```

---

# ================================================================

# üóÑÔ∏è 7. BANCO DE DADOS ‚Äì ADICIONAR TABELA onchain_operations

# ================================================================

Criar tabela:

```
onchain_operations (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER,
  type TEXT,
  amount REAL,
  tx_hash TEXT,
  timestamp DATETIME DEFAULT CURRENT_TIMESTAMP
)
```

Registrar tudo: mint / burn.

---

# ================================================================

# üé® 8. ESTILO E DESIGN (PADR√ÉO POLYMARKET)

# ================================================================

Aplicar:

* fundo roxo escuro (#0E0E16)
* gradiente suave no header
* fontes finas como Polymarket
* bot√µes minimalistas
* gr√°fico com bordas limpas
* componentes centralizados
* remover polui√ß√£o visual
* usar o estilo do gr√°fico Polymarket como refer√™ncia absoluta

---

# ==============================================================

# üü™ FINAL: EXECUTAR TODAS AS MUDAN√áAS ACIMA

# ==============================================================

**Implementar tudo exatamente como descrito.**

N√£o alterar l√≥gica do token.
N√£o mudar carteiras.
N√£o mudar fluxos.
N√£o mudar endpoints.

---

# FIM DO PROMPT

---

Se quiser, posso gerar **os arquivos de c√≥digo completos**, como:

* `useWallet.js`
* `CopyCNPJBox.jsx`
* `MintController.js`
* `BurnController.js`
* `RechartsGraph.jsx`
* fun√ß√µes para o X-CHANGE

√â s√≥ pedir.
